# PLEASE PAY ATTENTION TO SPACE BEFORE AND AFTER = SIGN
# format is " variable = value "

# info analysis
#  experiment ATLAS
#  id SUSY-2013-15
#  publication Eur. Phys. J. C(2016) 76: 392
#  sqrtS 13.0
#  lumi 3.2
#  arXiv 1605.03814
#  hepdata http://hepdata.cedar.ac.uk/view/ins1304456
#  doi 10.1140/epjc/s10052-016-4184-8

######## GENERIC OBJECT THRESHOLDS
minptp  = 10.0  # min pt of photons 
minpte  = 10.0  # min pt of electrons 
minptm  = 10.0  # min pt of muons 
minptj  = 20.0  # min pt of jets

maxetap = 2.37  # max pseudorapidity of photons  
maxetae = 2.47  # max pseudorapidity of electrons  
maxetam = 2.70  # max pseudorapidity of muons 
maxetaj = 2.80  # max pseudorapidity of jets

######## OBJECT SELECTION
obj  "JETclean : JET "
cmd  "{ JET_ , ELE_ }dR >= 0.2 "

# How to do bjets?

obj  "MUOclean : MUO "
cmd  "{ MUO_ , JETclean_ }dR >= 1.4 "
cmd  "{ MUO_ }IsolationVarRhoCorr < 0.1"

obj  "ELEclean : ELE "
cmd  "{ ELE_ , JETclean_ }dR >= 0.4 "

obj  "ELEveryclean : ELE "
cmd  "{ ELE_ , JETclean_ }dR >= 0.4 "

obj  "JETsr : JETclean "
cmd  "{ JETclean_ }Pt > 50 "


######## EVENT SELECTION
algo __preselection__
cmd   "ALL "                          # to count all events
cmd   "MET > 200 "                    
cmd   " nPHOtight >= 0 "
cmd   "{ MUclean_0 }Pt < 10 "         # Reject evt if there is a muon with pT > 10
cmd   "{ ELEveryclean_0 }Pt < 10 "    # Reject evt if there is an electron with pT > 10
cmd   " nJETsr > 0 "


algo __2j1__
__preselection__
cmd   " nJETsr >= 2 "
cmd   "{ JETsr_0 }Pt > 200 "
cmd   "{ JETsr_1 }Pt > 200 "
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.4 "   
cmd   " MET / HT ^ 0.5 > 15 "
??? cmd   " Meff > 1200 "

algo __2jm__
__preselection__
cmd   " nJETsr >= 2 "
cmd   "{ JETsr_0 }Pt > 300 "
cmd   "{ JETsr_1 }Pt > 50 "
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.4 "   
cmd   " MET / HT ^ 0.5 > 15 "
??? cmd   " Meff > 1600 "

algo __2jt__
__preselection__
cmd   " nJETsr >= 2 "
cmd   "{ JETsr_0 }Pt > 200 "
cmd   "{ JETsr_1 }Pt > 200 "
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.8 "   
cmd   " MET / HT ^ 0.5 > 20 "
??? cmd   " Meff > 2000 "

algo __4jt__
__preselection__
cmd   " nJETsr >= 4 "
cmd   "{ JETsr_0 }Pt > 200 "
cmd   "{ JETsr_1 }Pt > 100 "
cmd   "{ JETsr_2 }Pt > 100 "
cmd   "{ JETsr_3 }Pt > 100 "
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.4 "   
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.2 "
??? cmd   " aplanarity > 0.04 "
cmd   " MET / Meff4j > 0.2 "
??? cmd   " Meff > 2200 "

algo __5j__
__preselection__
cmd   " nJETsr >= 5 "
cmd   "{ JETsr_0 }Pt > 200 "
cmd   "{ JETsr_1 }Pt > 100 "
cmd   "{ JETsr_2 }Pt > 100 "
cmd   "{ JETsr_3 }Pt > 100 "
cmd   "{ JETsr_4 }Pt > 50 "
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.4 "   
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.2 "
??? cmd   " aplanarity > 0.04 "
cmd   " MET / Meff4j > 0.25 "
??? cmd   " Meff > 1600 "

algo __6jm__
__preselection__
cmd   " nJETsr >= 6 "
cmd   "{ JETsr_0 }Pt > 200 "
cmd   "{ JETsr_1 }Pt > 100 "
cmd   "{ JETsr_2 }Pt > 100 "
cmd   "{ JETsr_3 }Pt > 100 "
cmd   "{ JETsr_4 }Pt > 50 "
cmd   "{ JETsr_5 }Pt > 50 "
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.4 "   
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.2 "
??? cmd   " aplanarity > 0.04 "
cmd   " MET / Meff4j > 0.25 "
??? cmd   " Meff > 1600 "

algo __6jt__
__preselection__
cmd   " nJETsr >= 6 "
cmd   "{ JETsr_0 }Pt > 200 "
cmd   "{ JETsr_1 }Pt > 100 "
cmd   "{ JETsr_2 }Pt > 100 "
cmd   "{ JETsr_3 }Pt > 100 "
cmd   "{ JETsr_4 }Pt > 50 "
cmd   "{ JETsr_5 }Pt > 50 "
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.4 "   
??? cmd   "{ JETsr_-1 , METLV_0 }dPhi > 0.2 "
??? cmd   " aplanarity > 0.04 "
cmd   " MET / Meff4j > 0.2 "
??? cmd   " Meff > 2000 "
